sudo: required

services:
  - docker

before_install:
  - docker build -t rafaelcompanhoni/ec-dev-image -f Dockerfile.dev .

script:
  - docker run rafaelcompanhoni/ec-dev-image npm run test-ci
  - wget -qO- https://toolbelt.heroku.com/install.sh | sh
  - heroku container:push web -a ec-easy-class

deploy:
  provider: script
  script: heroku container:release web -a ec-easy-class
  on:
    branch: master
