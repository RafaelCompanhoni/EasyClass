sudo: required

addons:
  apt:
    sources:
      - heroku
    packages:
      - heroku-toolbelt

services:
  - docker

before_install:
  - docker build -t rafaelcompanhoni/ec-dev-image -f Dockerfile.dev .

script:
  - docker run rafaelcompanhoni/ec-dev-image npm run test-ci
  - heroku container:push web -a ec-easy-class

deploy:
  provider: script
  script:
    - heroku container:release web -a ec-easy-class
  on:
    branch: master
